/*global $ */
function fn_DesplazamientoSuave(pLinkOrigen, pDestino, pTiempo) {
    'use strict';
    var vNav = $("nav").height();
    $(pLinkOrigen).click(function () {
        $("html,body").animate({scrollTop: $(pDestino).offset().top}, pTiempo);
    });
}
function fn_CrearDesplazamientoSuave() {
    'use strict';
    fn_DesplazamientoSuave("#aNavInicio", "body", 2000);
    fn_DesplazamientoSuave("#aNavNosotros", "#seAbout", 2000);
    fn_DesplazamientoSuave("#aNavEventos", "#seEventos", 2500);
    fn_DesplazamientoSuave("#aNavCaract", "#seCaract", 2500);
    fn_DesplazamientoSuave("#aNavEspe", "#seEspecialidad", 2500);
    fn_DesplazamientoSuave("#aNavGaleriaN", "#seGaleriaN", 2500);
    fn_DesplazamientoSuave("#aNavLoca", "#seLocalizacion", 2500);
    fn_DesplazamientoSuave("#aNavContact", "#seContacto", 2500);
    fn_DesplazamientoSuave("#aToSeAbout", "#seAbout", 1000);
    fn_DesplazamientoSuave(".a__tocontacto", "#seLocalizacion", 2000);
}
function fn_LinkAlCielo() {
    'use strict';
    $("#aHome").click(function () {
        $("html,body").animate({scrollTop: 0}, 1000);
    });
    $(window).scroll(function () {
        if ($(this).scrollTop() > 2100) {
            $("#diHome").slideDown(400);
        } else {
            $("#diHome").slideUp(400);
        }
    });
}
function fn_AreYouInHeader(pObjeto) {
    'use strict';
    var vHeight = $(window).height(), vObjeto = $(pObjeto).offset().top;
    if (vHeight > vObjeto) {
        return 1;
    }
}
function fn_AnimarConClases(pObjeto, pAnimacionCss) {
    'use strict';
    $(pObjeto).each(function () {
        var vPosicionPantallaInferior = 0, vPosicionObjeto = 0, i = 0, vObjeto = $(this), vPuntoNoRetorno = 100, vWidth = $(window).width(), vHeight = $(window).height();
        if (vWidth < 767) { vPuntoNoRetorno = 1; }
        if ((fn_AreYouInHeader(vObjeto) !== 1)) {
            $(vObjeto).css("visibility", "hidden");
            $(window).scroll(function () {
                vPosicionPantallaInferior = $(this).scrollTop() + vHeight - vPuntoNoRetorno;
                vPosicionObjeto = $(vObjeto).offset().top;
                if ((vPosicionPantallaInferior > vPosicionObjeto) && (i < 1)) {
                    $(vObjeto).addClass(pAnimacionCss);
                    $(vObjeto).css("visibility", "visible");
                    i = i + 1;
                }
            });
        }
    });
}
function fn_DerrapeNav() {
    'use strict';
    var vNavi = $(".navi__list"), vClicked = $("#HamLabel"), vNaviA = $(".navi__list li a");
    $(vClicked).click(function () {
        $(vNavi).toggleClass("animation__kderrape");
    });
    $(vNaviA.click(function () {
        $(vNavi).toggleClass("animation__kderrape");
    }));
}
function fn_IniciarToolTipsBS() {
    'use strict';
    $("[data-toggle='tooltip']").tooltip();
}
/*function fn_PreloaderAway() {
    'use strict';
    var vVictim = $("#diPreloader");
    vVictim.delay(20000).fadeOut(2000, function () {
        vVictim.remove();
    });
}*/
function fn_ActualizarFechaFooter() {
    'use strict';
    var vFecha = new Date(),
        vAnio = vFecha.getFullYear();
    $("#spFecha").text(vAnio);
}
function fn_AddGoogleMaps() {
    'use strict';
    $(window).on("load", function () {
        $(".iframe__localizacion").attr("src", "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1513.9547555013105!2d-3.177971018648125!3d40.63187751637128!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x9277c263f5d7899!2sRestaurante+la+Canda!5e0!3m2!1ses!2ses!4v1474897727109");
    });
}
function fn_GoogleAnalytics() {
    'use strict';
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-112231153-1', 'auto');
ga('send', 'pageview');           
}
function fn_ClickWarning() {
    'use strict';
    $("#dCookiesWarning-btn").on("click", function () {
        fn_GoogleAnalytics();
    });
}
function fn_SetValueDefParam(pParam, pDefaultValue) {
    'use strict';
    return typeof pParam !== 'undefined' ? pParam : pDefaultValue;
}
function fn_CheckImgUprightPosition(pImgClicked) {
    'use strict';
    var vWidthImg = $(pImgClicked).width(), vHeightImg = $(pImgClicked).height(), vCheckImgPosition = 0;
    if (vHeightImg > vWidthImg) {
        vCheckImgPosition = 1;
    }
    return vCheckImgPosition;
}
function fn_ClickImgForLoad() {
    'use strict';
    $(".js-load-on-click").on("click", function () {
        var vCheckImgPosition = fn_CheckImgUprightPosition($(this)),
            vDataSrc = $(this).children().attr("src"),
            vDataSrcset = fn_SetValueDefParam(($(this).children().attr("srcset")), ""),
            vDataSizes = fn_SetValueDefParam(($(this).children().attr("sizes")), ""),
            vDataAlt = fn_SetValueDefParam(($(this).children().attr("alt")), "Imagen a pantalla completa"),
            vDataTargetDad = $("body"),
            vDataAppended = $("<div class='modal__fondo'><a class='modal__anchor'><img src='" + vDataSrc + "'srcset='" + vDataSrcset + "'alt='" + vDataAlt + "' sizes='" + vDataSizes + "'class='modal__img'></a></div>").hide().fadeIn(700);
        if (vCheckImgPosition === 1) {
            vDataAppended.find("img").css("max-width", "560px");
            if (window.matchMedia("(orientation:landscape)").matches) {
                if ($(window).width() < 767) {
                    vDataAppended.find("img").css("max-width", "285px");
                }
            }
        }
        $(vDataTargetDad).append(vDataAppended);
        $(vDataAppended).on("click", function () {
            $(vDataAppended).fadeOut(500, function () {
                $(vDataAppended).remove();
            });
        });
    });
}
function fn_AddRandomClassInGalery(pTarget, pClase) {
    'use strict';
    var vSection = pTarget;
    $(vSection).each(function () {
        var vRandom = Math.floor(Math.random() * (10)) + 1;
        if ((vRandom % 2) === 0) {
            fn_AnimarConClases($(this), pClase);
        }
    });
}
$(function () {
    'use strict';
    fn_CrearDesplazamientoSuave();
    fn_LinkAlCielo();
    fn_IniciarToolTipsBS();
    fn_ActualizarFechaFooter();
    fn_DerrapeNav();
    fn_AddGoogleMaps();
    fn_ClickWarning();
    fn_ClickImgForLoad();
    var vAncho = $(window).width();
    if (vAncho > 319) {
        fn_AnimarConClases("#diAboutTxt", "animation__kfadein");
        fn_AnimarConClases("#seEventos ul li", "animation__kfadein");
        fn_AnimarConClases("#diEspecialidad", "animation__kfadein");
        fn_AnimarConClases(".ul__caract li", "animation__kfadein");
        fn_AnimarConClases(".fi__galerian > div", "animation__kfadein");
        fn_AnimarConClases(".iframe__localizacion", "animation__kfadein");
        fn_AnimarConClases("#seContacto address > div", "animation__kfadein");
        fn_AnimarConClases("#di2Footer",  "animation__kderrape");
        fn_AnimarConClases("#diPlatoRec img", "animation__klatido");
    }
});